<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.css" rel="stylesheet" />
	</head>

	<body>
		<div id="app" class="mui-content">
			<header class="mui-bar mui-bar-nav">
				<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
				<h1 class="mui-title">系统</h1>
			</header>
			<nav class="mui-bar mui-bar-tab">
				<a class="mui-tab-item mui-active" v-on:tap="toHome">
					<span class="mui-icon mui-icon-home"></span>
					<span class="mui-tab-label">首页</span>
				</a>
				<a class="mui-tab-item" v-on:tap="toHome">
					<span class="mui-icon mui-icon mui-icon-paperplane"></span>
					<span class="mui-tab-label">导航</span>
				</a>
				<a class="mui-tab-item" v-on:tap="toHome">
					<span class="mui-icon mui-icon-gear"></span>
					<span class="mui-tab-label">系统</span>
				</a>
			</nav>
			<div class="mui-content">

				<div class="mui-numbox">
					<button class="mui-btn mui-btn-numbox-minus" type="button">-</button>
					<input id="box" class="mui-input-numbox" type="number" v-bind:value="comValue"></input>
					<button class="mui-btn mui-btn-numbox-plus" type="button">+</button>
				</div>
				<button class="mui-btn" v-on:tap="opCOM" style="padding: 7px 12px;">打开串口</button>
			</div>
		</div>
		<script src="../../js/mui.js"></script>
		<script src="../../js/api.js"></script>
		<script src="../../js/axios.js" type="text/javascript" charset="utf-8"></script>
		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
		<script type="text/javascript">
			mui.init()

			var app = new Vue({
				el: '#app',
				data: {
					devices: [],
					comValue: 4
				},
				created: function() {

				},
				methods: {
					toHome: function() {
						mui.openWindow('../../index.html');
					},
					opCOM: function() {
						
						// var co = 
						var url = SystemCOM + "com=" + this.comValue + "&command=1";
						console.log(url);
						mui.toast("指令已发送.");
						
						axios.get(url)
							.then(function(response) {
								console.log(response.data);
								mui.toast(response.data);
							})
							.catch(function(error) {
								console.log(error);
							});
					}
				}
			});
		</script>
	</body>

</html>
